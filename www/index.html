<!DOCTYPE html>
<html>
<head>
    <title>Cleveland Metroparks Mobile App</title>
    <meta charset="utf-8" />
    <!-- scripts and stuff at the bottom, seems to solve some timing issue on iPad -->

    <!-- Cordova's stub -->
    <script type="text/javascript" src="cordova.js"></script>
</head>
<body>



<div data-role="page" id="page-welcome">
    <div data-role="header">
        <h1>Welcome</h1>
        <a href="#page-map">Continue</a>
    </div>
    <div data-role="content">

        <p>Welcome to the Cleveland Metroparks Mobile Trail App.</p>
        <ul>
        <li><b>Find</b> trails, parks, and park amenities!</li>
        <li>Get <b>directions</b> to parks and amenities via Cleveland's extensive network of trails, or by driving or public transit.</li>
        </ul>

        <p class="disclaimer">
        <b>Disclaimer:</b><br/>
        This information is for display purposes only. Cleveland Metroparks makes
        no warranties, expressed or implied, with respect to the accuracy of and
        the use of this map and mapping application for any specific purpose.
        Cleveland Metroparks expressly disclaims any liability that may result
        from the use of this map or mapping application. For more information,
        please contact: Stephen Mather, GIS Manager, 4101 Fulton Pkwy, Cleveland, Ohio 44144 (216) 635-3243
        </p>

    </div>
</div>




<div data-role="page" id="page-map">
    <div data-role="content">
        <div id="map-location-warnings">
            <span class="location_outside">You seem to be outside the Cleveland area. The map may not show anything where you are.</span>
            <br/>
            <span class="location_fail">Not finding your location. Check that location is enabled and that you have good signal.</span>
        </div>

        <div id="map_canvas">
                <a id="mapbutton_settings" href="#page-settings"><img src="images/mapbutton_settings.png" /></a>
                <a id="mapbutton_gps" href="javascript:void(0);"><img src="images/mapbutton_gps_ios_off.png" /></a>
        </div>

        <div id="toolbar" class="above_map">
            <table>
            <tr>
                <td><a class="button" id="button_find" href="#page-find"><img src="images/button_find.png" /></a></td>
                <td><a class="button" id="button_radar" href="#page-radar"><img src="images/button_radar.png" /></a></td>
                <td><a class="button" id="button_directions" href="#page-getdirections"><img src="images/button_directions.png" /></a></td>
            </tr>
            </table>
        </div>

    </div>
</div>



<div data-role="page" id="page-radar">
    <div data-role="header">
        <a href="#page-map" data-icon="back">Back</a>
        <h1>Near You</h1>
    </div>
    <div data-role="content">
        <label><input type="checkbox" id="radar_enabled" /> Enable alerts</label>
        <br/>
        <div id="radar_config" style="display:none;">
            <strong>Alert me when I am within:</strong>
            <select id="radar_radius" data-mini="true">
            <option value="6.10">20 feet</option>
            <option value="15.24">50 feet</option>
            <option value="30.48">100 feet</option>
            <option value="76.2">250 feet</option>
            <option value="152.4" selected="true">500 feet</option>
            <option value="402.336">&frac14; mile</option>
            <option value="804.672">&frac12; mile</option>
            <option value="1207.08">&frac34; mile</option>
            <option value="1609.344">1 mile</option>
            </select>
            <br/>
            <strong>Watch for these types of features:</strong>
            <fieldset data-role="controlgroup">
            <label><input type="checkbox" name="radar_category" value="Health Tips" checked="checked">Health Tips</label>
<!--gda not implemented yet, see a future initRadar() function perhaps? -->
            </fieldset>
        </div>

        <br/>

        <ul id="alerts" data-role="listview">
        </ul>
    </div>
</div>





<div data-role="page" id="page-find">
    <div data-role="header">
        <a href="#page-map" data-icon="back">Back</a>
        <h1>Find</h1>
        <a href="#page-map">Map</a>
    </div>
    <div data-role="content">

        <fieldset data-role="controlgroup" data-type="geocode">
            <b>Keyword search:</b>
            <input type="text" name="keyword" placeholder="Enter name or keyword" style="margin-left:0.5em;" />
            <input type="button" data-icon="search" data-iconpos="right" value="Search" />
        </fieldset>
        <ul data-role="listview" data-inset="true" data-type="autocomplete"></ul>

        <ul data-role="listview" data-inset="true">
            <li><a href="#page-find-pois"><img class="ui-li-icon" src="images/menu_pois.png" /> &nbsp; Points of Interest</a></li>
            <li><a href="#page-find-trails"><img class="ui-li-icon" src="images/menu_trailfinder.png" /> &nbsp; Trail Finder</a></li>
            <li><a href="#page-find-loops"><img class="ui-li-icon" src="images/menu_loops.png" /> &nbsp; Featured Routes</a></li>
        </ul>

    </div>
</div>




<div data-role="page" id="page-find-pois">
    <div data-role="header">
        <a href="#page-find" data-icon="back">Back</a>
        <h1>Find POIs</h1>
    </div>
    <div data-role="content">

        <!-- this is populated by initFindPOIs() -->
        <ul data-role="listview" data-inset="true"></ul>

    </div>
</div>



<div data-role="page" id="page-find-trails">
    <div data-role="header">
        <a href="#page-find" data-icon="back">Back</a>
        <h1>Trail Finder</h1>
    </div>
    <div data-role="content">
       <!-- UI is tapping icons, not a SELECT element; see initFindTrails() and searchTrails() -->
        <div style="text-align:center;">
            <b>Select Activity</b><br/>
            <img data-field="activity" data-value="Hiking & Walking"  src="images/trailfinder_hike_off.png" />
            <img data-field="activity" data-value="Biking"            src="images/trailfinder_bike_off.png" />
            <img data-field="activity" data-value="Horseback Riding"  src="images/trailfinder_horse_off.png" />
            <img data-field="activity" data-value="Mountain Biking"   src="images/trailfinder_mtnbike_off.png" />
        </div>

        <!-- Pavement selector: they want it hidden but endpoint needs it, and they will likely want it back anyway -->
        <div style="text-align:center; display:none;">
        <b>Pavement:</b><br/>
            <select name="paved">
            <option value="">No preference</option>
            <option value="Yes">Paved</option>
            <option value="No">Unpaved</option>
        </select>
        </div>

        <!-- Reservation filter: populated from a list, see initFindTrails() -->
        <div style="text-align:center; margin-top:1em;">
            <b>Select Location</b><br/>
            <select name="reservation"></select>
        </div>

        <div style="text-align:center; margin-top:1em;">
            <input type="button" data-icon="search" data-iconpos="right" value="Search" />
        </div>
    </div>
</div>



<div data-role="page" id="page-find-loops">
    <div data-role="header">
        <a href="#page-find" data-icon="back">Back</a>
        <h1>Loops &amp; Routes</h1>
    </div>
    <div data-role="content">
        <!-- UI changed to tapping icons; see initFindLoops() and searchLoops() -->
        <div style="text-align:center;">
            <b>Select Activity</b><br/>
            <img data-field="activity" data-value="hike"          src="images/trailfinder_hike_off.png" />
            <img data-field="activity" data-value="bike_Advanced" src="images/trailfinder_bike_off.png" />
            <img data-field="activity" data-value="bridle"        src="images/trailfinder_horse_off.png" />
            <img data-field="activity" data-value="mountainbike"  src="images/trailfinder_mtnbike_off.png" />
        </div>

        <!-- Pavement selector: they want it hidden but endpoint needs it, and they will likely want it back anyway -->
        <div style="text-align:center; display:none;">
            <select name ="paved" data-mini="true">
            <option value="">Paved or unpaved</option>
            <option value="Yes">Paved</option>
            <option value="No">Unpaved</option>
            </select>
        </div>

        <!-- Length filter: featured loops have a known length and estimated durations, used for filtering -->
        <!-- UI is tapping icons; see initFindLoops() and searchLoops() -->
        <div style="text-align:center;  margin-top:1em;">
            <b>Select Length</b><br/>
            <img data-field="length" data-min="0"   data-max="2"    src="images/trailfinder_distance1_off.png" />
            <img data-field="length" data-min="2"   data-max="5"    src="images/trailfinder_distance2_off.png" />
            <img data-field="length" data-min="5"   data-max="10"   src="images/trailfinder_distance3_off.png" />
            <img data-field="length" data-min="10"  data-max="100"  src="images/trailfinder_distance4_off.png" />
        </div>

        <!-- Reservation filter: populated from a list, see initFindTrails() -->
        <div style="text-align:center; margin-top:1em;">
            <b>Select Location</b><br/>
            <select name="reservation"></select>
        </div>

        <!-- Duration filter: featured loops have a known length and estimated durations, used for filtering -->
        <!-- the endpoint requires this, but this field is now shown to the user -->
        <div style="text-align:center; display:none;">
            <b>Select Duration</b><br/>
            <input type="hidden" name="duration_min" value="0" />
            <input type="hidden" name="duration_max" value="300" />
        </div>

        <div style="text-align:center; margin-top:1em;">
            <input type="button" data-icon="search" data-iconpos="right" value="Search" />
        </div>

    </div>
</div>




<div data-role="page" id="page-find-results">
    <div data-role="header">
        <a href="#page-find" data-icon="back">Back</a>
        <h1>Find</h1>
        <a href="#page-map">Map</a>
    </div>
    <div data-role="content">

        <div class="sortpicker">
            <span class="fakelink" value="distance">Sort by distance</span>
            &bull;
            <span class="fakelink" value="alphabetical">Sort alphabetically</span>
        </div>

        <!-- populated by searchProcessResults() -->
        <ul id="search_results" data-role="listview" data-inset="true" class="distance_sortable">
        </ul>

    </div>
</div>






<div data-role="page" id="page-settings">
    <div data-role="header">
        <a href="#page-map">Apply</a>
        <h1>Map Settings</h1>
    </div>
    <div data-role="content">

        <h3>Map Type</h3>
        <fieldset data-role="controlgroup">
        <label><input type="radio" name="basemap" value="terrain" checked="true" /> Map </label>
        <label><input type="radio" name="basemap" value="photo" /> Satellite </label>
        <label><input type="checkbox" id="basemap_offline_checkbox" value="1" /> Offline, use cached map data</label>
        </fieldset>

        <h3>Legend</h3>
        <fieldset data-role="controlgroup" style="margin-left:25px;">

            <b>POIs / Use Areas</b><br/>
            <img class="legend" value="useareapois" style="display:block;" src="images/legend_useareapois.png" />

            <b>Reservations</b><br/>
            <img class="legend" value="reservations" style="display:block;" src="images/legend_parks.png" />

            <b>Trail Tips</b><br/>
            <img class="legend" value="markers_swgh" style="display:block;" src="images/legend_markers.png" />

        </fieldset>

        <h3>GPS Location</h3>
        <div class="fakeinput" id="gps_location" style="text-align:center;">N 00 00.000 W 000 00.000</div>

        <h3>Offline Map</h3>
        <div data-role="controlgroup">
            <a href="#page-seedcache" data-role="button" data-rel="dialog">Download map tiles</a>
            <a href="#page-cachestatus" data-role="button" data-rel="dialog">Offline tile usage</a>
        </div>

        <div style="text-align:center;">
            <br/>
            <a href="#page-credits">About this app</a>
        </div>

    </div>
</div>




<div data-role="page" id="page-seedcache">
    <div data-role="header" data-position="inline">
    <h1>Download Tiles?</h1>
    </div>

    <div data-role="content">
        <p>This will download map tiles within the current map view, so you can use the map without Internet access. This will take a while, and could use a few megabytes of network data. You may prefer to do this over a wifi connection.</p>
        <a href="javascript:void(0);" name="seedcache" data-role="button" data-rel="back" data-theme="b">Download</a>
        <a href="#page-settings" data-role="button" data-rel="back">Cancel</a>
    </div>
</div>




<div data-role="page" id="page-cachestatus">
    <div data-role="header" data-position="inline">
    <h1>Offline Map Storage</h1>
    </div>


    <div data-role="content">
        <input type="text" id="cachestatus_storage" value="Calculating" readonly="readonly" style="text-align:center;" />
        <input type="text" id="cachestatus_files" value="Calculating" readonly="readonly" style="text-align:center;" />
        <a href="#page-clearcache" data-role="button" name="clearcache">Delete offline tiles</a>
        <a href="#page-settings" data-role="button" data-rel="back" data-icon="back">Back</a>
    </div>
</div>





<div data-role="page" id="page-credits">
    <div data-role="header">
        <a href="#page-map" data-icon="back">Back</a>
        <h1>Credits</h1>
    </div>
    <div data-role="content">

        <p>Parks and facilities data by <a target="_blank" href="http://www.clemetparks.com/">Cleveland Metroparks</a></p>
        <p>Some base map data &copy; <a target="_blank" href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a></p>
        <p>Driving and transit directions courtesy of <a target="_blank" href="http://www.bing.com/maps/">Bing Maps</a></p>
        <p>Map interface programmed by <a target="_blank" href="http://www.greeninfo.org/">GreenInfo Network</a></p>
        <p>Funding provided by <a target="_blank" href="http://www.swgeneral.com/">Southwest General Health Center</a></p>

        <p class="disclaimer">
        <b>Disclaimer:</b><br/>
        This information is for display purposes only. Cleveland Metroparks makes
        no warranties, expressed or implied, with respect to the accuracy of and
        the use of this map and mapping application for any specific purpose.
        Cleveland Metroparks expressly disclaims any liability that may result
        from the use of this map or mapping application. For more information,
        please contact: Stephen Mather, GIS Manager, 4101 Fulton Pkwy, Cleveland, Ohio 44144 (216) 635-3243
        </p>

    </div>
</div>



<div data-role="dialog" id="dialog-error">
    <div data-role="header">
        <h1></h1>
    </div>
    <div data-role="content">
    </div>
</div>



<audio autoboffer id="alert_beep">
    <source src="sounds/alert.ogg" />
    <source src="sounds/alert.mp3" />
</audio>



<!-- scripts and stuff at the bottom, seems top solve some timing issue on iPad -->
    <!-- weinre debugging for development; replace with your own IP address and your own weinre server -->
    <!--
    <script src="http://weinre.greeninfo.org:8080/target/target-script-min.js#clemet"></script>
    -->

    <!-- jQuery et al -->
    <script type="text/javascript" src="libs/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="libs/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <link type="text/css" rel="stylesheet" href="libs/jquery.mobile-1.1.0/jquery.mobile-1.1.0.css" />
    <script type="text/javascript" src="libs/jquery.sort.js"></script>
    <script type="text/javascript" src="libs/jquery.purl.js"></script>
    <script type="text/javascript" src="libs/jqm.autoComplete-1.5.1.js"></script>

    <!-- Leaflet map API and Wicket plugin for parsing WKT -->
    <link rel="stylesheet" type="text/css" href="libs/leaflet-0.7.1/leaflet.css" />
    <script type="text/javascript" src="libs/leaflet-0.7.1/leaflet.js"></script>
    <script type="text/javascript" src="libs/wicket/wicket.js"></script>
    <script type="text/javascript" src="libs/wicket/wicket-leaflet.js"></script>

    <!-- a caching system for Leaflet L.TileLayer -->
    <script type="text/javascript" src="libs/cache.js"></script>

    <!-- our own awesomesauce -->
    <script type="text/javascript" src="index.js"></script>
    <link rel="stylesheet" type="text/css" href="index.css" />
    <script type="text/javascript">
    document.addEventListener("deviceready", init, false);
    </script>
</body>
</html>

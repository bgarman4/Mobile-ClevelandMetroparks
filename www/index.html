<!DOCTYPE html>
<html>
<head>
    <title>Cleveland Metroparks Mobile App</title>
    <meta charset="utf-8" />
    <!-- scripts and stuff at the bottom, seems to solve some timing issue on iPad -->

    <!-- Cordova's stub -->
    <script type="text/javascript" src="cordova.js"></script>
</head>
<body>



<div data-role="page" id="page-map">
    <div data-role="content">
        <div id="map-location-warnings">
            <span class="location_outside">You seem to be outside the Cleveland area. The map may not show anything in your area.<br/></span>
            <span class="location_fail">Not finding your location. Check that location is enabled and that you have good signal.<br/></span>
            <span class="location_poor">Estimating your location. Check your location settings and make sure location services are enabled.<br/></span>
        </div>

        <div id="map_canvas">
                <a id="mapbutton_settings" href="#page-settings"><img src="images/mapbutton_settings.png" /></a>
                <a id="mapbutton_gps"      href="javascript:void(0);"><img src="images/mapbutton_gps_ios_off.png" /></a>
        </div>

        <div class="map_toolbar">
            <table>
            <tr>
                <td><a class="button" href="#page-find"><img src="images/button_find.png" /></a></td>
                <td><a class="button" href="#page-find-nearby"><img src="images/button_nearby.png" /></a></td>
                <td class="hide"><a class="button" href="#page-directions"><img src="images/button_directions.png" /></a></td>
            </tr>
            </table>
        </div>

    </div>
</div>



<div data-role="page" id="page-welcome">
    <div data-role="header">
        <h1>Welcome</h1>
        <a href="#page-map">Continue</a>
    </div>
    <div data-role="content">
        <p>Welcome to the Cleveland Metroparks Mobile Trail App.</p>
        <ul>
            <li><b>Find</b> trails, parks, and park amenities!</li>
            <li>Get <b>directions</b> to parks and amenities via Cleveland's extensive network of trails, or by driving or public transit.</li>
        </ul>

        <p class="disclaimer">
            <b>Disclaimer:</b><br/>
            This information is for display purposes only. Cleveland Metroparks makes
            no warranties, expressed or implied, with respect to the accuracy of and
            the use of this map and mapping application for any specific purpose.
            Cleveland Metroparks expressly disclaims any liability that may result
            from the use of this map or mapping application. For more information,
            please contact: Stephen Mather, GIS Manager, 4101 Fulton Pkwy, Cleveland, Ohio 44144 (216) 635-3243
        </p>

        <p class="credits">
            Parks and facilities data by <a target="_blank" href="http://www.clemetparks.com/">Cleveland Metroparks</a>
            <br/>
            <br/>
            Some base map data &copy; <a target="_blank" href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>
            <br/>
            <br/>
            Driving and transit directions courtesy of <a target="_blank" href="http://www.bing.com/maps/">Bing Maps</a>
            <br/>
            <br/>
            Map interface programmed by <a target="_blank" href="http://www.greeninfo.org/">GreenInfo Network</a>
            <br/>
            <br/>
            Funding provided by <a target="_blank" href="http://www.swgeneral.com/">Southwest General Health Center</a>
        </p>

        <div>
            <label><input type="checkbox" name="skip_welcome" /> Skip this page next time</label>
        </div>
    </div>
</div>




<div data-role="page" id="page-find">
    <div data-role="header">
        <h1>Find</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">

        <fieldset data-role="controlgroup" data-type="keyword">
            <div class="bold center">Keyword search:</div>
            <label><input type="text" name="keyword" data-inset="true" placeholder="Enter name or keyword" /></label>
            <ul data-role="listview" data-inset="true" data-type="autocomplete"></ul>
            <input type="button" data-icon="search" data-iconpos="right" value="Search" data-theme="b" />
        </fieldset>

        <ul data-role="listview" data-inset="true">
            <li><a href="#page-find-results"><img class="ui-li-icon" src="images/menu_prior.png" /> &nbsp; Previous Results</a></li>
            <li><a href="#page-find-pois"><img class="ui-li-icon" src="images/menu_pois.png" /> &nbsp; Points of Interest</a></li>
            <li><a href="#page-find-trails"><img class="ui-li-icon" src="images/menu_trailfinder.png" /> &nbsp; Trail Finder</a></li>
            <li><a href="#page-find-loops"><img class="ui-li-icon" src="images/menu_loops.png" /> &nbsp; Featured Routes</a></li>
        </ul>

        <div class="center" style="margin-top:3em;">
            <a href="#page-welcome">About This App</a>
        </div>
    </div>
</div>




<div data-role="page" id="page-find-pois">
    <div data-role="header">
        <a href="#page-find" data-icon="search">Find</a>
        <h1>Find Points</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">

        <!-- this is populated by initFindPOIs() -->
        <ul data-role="listview" data-inset="true"></ul>

    </div>
</div>



<div data-role="page" id="page-find-trails">
    <div data-role="header">
        <a href="#page-find" data-icon="search">Find</a>
        <h1>Trail Finder</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">
       <!-- UI is tapping icons, not a SELECT element; see initFindTrails() and searchTrails() -->
        <div class="center">
            <b>Select Activity</b><br/>
            <img data-field="activity" data-value="Hiking & Walking"  src="images/trailfinder_hike_off.svg" />
            <img data-field="activity" data-value="Biking"            src="images/trailfinder_bike_off.svg" />
            <img data-field="activity" data-value="Horseback Riding"  src="images/trailfinder_horse_off.svg" />
            <img data-field="activity" data-value="Mountain Biking"   src="images/trailfinder_mtnbike_off.svg" />
        </div>

        <!-- Reservation filter: populated from a list, see initFindTrails() -->
        <div class="center" style="margin-top:1em;">
            <b>Select Location</b><br/>
            <select name="reservation"></select>
        </div>

        <div class="center" style="margin-top:1em;">
            <input type="button" data-icon="search" data-iconpos="right" value="Search" data-theme="b" />
        </div>
    </div>
</div>



<div data-role="page" id="page-find-loops">
    <div data-role="header">
        <a href="#page-find" data-icon="search">Find</a>
        <h1>Loops &amp; Routes</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">
        <!-- UI changed to tapping icons; see initFindLoops() and searchLoops() -->
        <div class="center">
            <b>Select Activity</b><br/>
            <img data-field="activity" data-value="hike"          src="images/trailfinder_hike_off.svg" />
            <img data-field="activity" data-value="bike_Advanced" src="images/trailfinder_bike_off.svg" />
            <img data-field="activity" data-value="bridle"        src="images/trailfinder_horse_off.svg" />
            <img data-field="activity" data-value="mountainbike"  src="images/trailfinder_mtnbike_off.svg" />
        </div>

        <!-- Length filter: featured loops have a known length and estimated durations, used for filtering -->
        <!-- UI is tapping icons; see initFindLoops() and searchLoops() -->
        <div class="center" style="margin-top:1em;">
            <b>Select Length</b><br/>
            <img data-field="length" data-min="0"   data-max="2"    src="images/trailfinder_distance1_off.png" />
            <img data-field="length" data-min="2"   data-max="5"    src="images/trailfinder_distance2_off.png" />
            <img data-field="length" data-min="5"   data-max="10"   src="images/trailfinder_distance3_off.png" />
            <img data-field="length" data-min="10"  data-max="100"  src="images/trailfinder_distance4_off.png" />
        </div>

        <!-- Reservation filter: populated from a list, see initFindTrails() -->
        <div class="center" style="margin-top:1em;">
            <b>Select Location</b><br/>
            <select name="reservation"></select>
        </div>

        <div class="center" style="margin-top:1em;">
            <input type="button" data-icon="search" data-iconpos="right" value="Search" data-theme="b" />
        </div>

    </div>
</div>




<div data-role="page" id="page-find-nearby">
    <div data-role="header">
        <a href="#page-map" data-icon="back">Back</a>
        <h1>Near You</h1>
        <a href="#page-find-results" data-icon="search">Results</a>
    </div>
    <div data-role="content">

        <p>Get alerts when you're near activities and places of interest. Enable alerts to get started.</p>

        <!-- the Nearby results listing, the closest X things to our current location -->
        <ul id="nearby_listing" data-role="listview" style="margin-bottom:2em;">
        </ul>

        <!-- Enable Alerts and the (hidden) list of activity categories which will give an alert when seen within a given radius  -->
        <label><input type="checkbox" id="nearby_enabled" /> Enable alerts</label>
        <br/>
        <div id="nearby_config" style="display:none;">
            <strong>Alert me when I am within:</strong>
            <select id="nearby_radius">
                <option value="30">100 feet</option>
                <option value="76">250 feet</option>
                <option value="152" selected="true">500 feet</option>
                <option value="402">&frac14; mile</option>
                <option value="804>&frac12; mile</option>
                <option value="1207">&frac34; mile</option>
                <option value="1609">1 mile</option>
                <option value="3218">2 miles</option>
                <option value="8045">5 miles</option>
            </select>
            <br/>
            <strong>Watch for these types of features:</strong>
            <fieldset data-role="controlgroup" data-type="activities">
                <!-- populated by initNearbyPanel() -->
            </fieldset>
        </div>
    </div>
</div>





<div data-role="page" id="page-find-results">
    <div data-role="header">
        <a href="#page-find" data-icon="search">Find</a>
        <h1>Find</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">

        <div class="sortpicker">
            <a href="javascript:void(0);" class="active" data-sortby="distance">Sort by distance</a>
            &bull;
            <a href="javascript:void(0);" data-sortby="alphabetical">Sort alphabetically</a>
        </div>

        <!-- populated by searchProcessResults() -->
        <ul id="search_results" data-role="listview" data-inset="true">
        </ul>

    </div>
</div>






<div data-role="page" id="page-settings">
    <div data-role="header">
        <a href="#page-map" data-icon="check">Apply</a>
        <h1>Map Settings</h1>
    </div>
    <div data-role="content">

        <h3 class="center">Map Type</h3>
        <fieldset data-role="controlgroup">
        <label><input type="radio" name="basemap" value="terrain" checked="true" /> Map </label>
        <label><input type="radio" name="basemap" value="photo" /> Satellite </label>
        <label><input type="checkbox" id="basemap_offline_checkbox" value="1" /> Offline, use cached map data</label>
        </fieldset>

        <h3 class="center">GPS Location</h3>
        <div class="fakeinput center" id="gps_location">N 00 00.000 W 000 00.000</div>

        <h3 class="center">Offline Map</h3>
        <div data-role="controlgroup">
            <a href="#page-seedcache" data-role="button" data-rel="dialog">Download map tiles</a>
            <a href="#page-cachestatus" data-role="button" data-rel="dialog">Offline tile usage</a>
        </div>

    </div>
</div>




<div data-role="page" id="page-seedcache">
    <div data-role="header" data-position="inline">
    <h1>Download Tiles?</h1>
    </div>

    <div data-role="content">
        <p>This will download map tiles within the current map view, so you can use the map without Internet access. This will take a while, and could use a few megabytes of network data. You may prefer to do this over a wifi connection.</p>
        <a href="javascript:void(0);" name="seedcache" data-role="button" data-rel="back" data-theme="b">Download</a>
        <a href="#page-settings" data-role="button" data-rel="back" id="page-seedcache-cancel">Cancel</a>
    </div>
</div>




<div data-role="page" id="page-cachestatus">
    <div data-role="header" data-position="inline">
    <h1>Offline Map Storage</h1>
    </div>


    <div data-role="content">
        <input type="text" id="cachestatus_storage" value="Calculating" readonly="readonly" />
        <input type="text" id="cachestatus_files" value="Calculating" readonly="readonly" />
        <a href="#page-clearcache" data-role="button" name="clearcache" data-theme="b">Delete offline tiles</a>
        <a href="#page-settings" data-role="button" data-rel="back">Back</a>
    </div>
</div>




<div data-role="page" id="page-details">
    <!-- see initDetailsPanel() and showDetailsPanel() for important details about the Map button -->
    <div data-role="header">
        <a href="#page-find" data-icon="search">Find</a>
        <h1>Location Details</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">

        <div class="directions_floater">
            <a href="#page-directions"><img src="images/directions.png" /></a>
        </div>

        <!-- description HTML -->
        <div class="description"></div>

    </div>
</div>



<div data-role="page" id="page-directions">
    <div data-role="header">
        <a href="#" data-icon="back" data-rel="back">Back</a>
        <h1>Directions</h1>
        <a href="#page-map" data-icon="map">Map</a>
    </div>
    <div data-role="content">

        <h2 class="name">Place Name Here</h2>

        <!-- a simple form, but complicated by elements showing and hiding... and thus parent wrappers necessary to also toggle the JQM decor -->
        <!-- see initDirectionsPanel() -->
        <input type="hidden" name="origlat" /> <input type="hidden" name="origlng" /> <!-- origin latitude and longitude -->
        <input type="hidden" name="destlat" /> <input type="hidden" name="destlng" /> <!-- destination latitude & longitude-->
        <input type="hidden" name="feature_type" /> <input type="hidden" name="feature_gid" />  <!-- if routing to a Feature, the Type and GID -->

        <fieldset>
            <!-- is our origin our current location, a named address, or a named park feature (has search results) -->
            <select name="origin">
                <option value="gps">From your location</option>
                <option value="geocode">From an address</option>
                <option value="features">From a park feature</option>
            </select>
            <span class="togglewrapper">
                <label><input type="text" name="address" placeholder="place name or address" /></label>
            </span>

            <br/>

            <!-- like Trail Finder we don't use a SELECT element but a set of images; one will be tagged with data-selected="true" -->
            <!-- see initDetailsAndDirectionsPanels() where this click handler is set up, and where the FIRST ONE will be clicked and thus used as the default -->
            <!-- see directionsParseAddressAndValidate() and directionsFetch() where these are examined to determine which one is selected -->
            <div class="directions_buttons">
                <img src="images/directions_hike_off.svg" data-mode="hike" />
                <img src="images/directions_bike_off.svg" data-mode="bike_advanced" />
                <img src="images/directions_car_off.svg" data-mode="car" />
                <img src="images/directions_bus_off.svg" data-mode="bus" />
            </div>

            <br/>

            <!-- Go! -->
            <input type="button" value="Get directions" data-icon="search" data-iconpos="right" data-theme="b" />
        </fieldset>

        <!-- Did You Mean... results -->
        <ul data-role="listview" id="directions_autocomplete">
        </ul>

        <!-- the listing for the text of the directions -->
        <ul data-role="listview" id="directions_list">
        </ul>

        <!-- elevation profile image, for trail routing scenarios (hike/bike)-->
        <div class="center" style="margin-top:2em;">
            <img id="directions_elevationprofile" src="about:blank" />
        </div>

    </div>
</div>



<div data-role="dialog" id="dialog-error">
    <div data-role="header">
        <h1></h1>
    </div>
    <div data-role="content">
    </div>
</div>



<!-- scripts and stuff at the bottom, seems top solve some timing issue on iPad -->
    <!-- weinre debugging for development -->
    <!--
    <script src="http://weinre.greeninfo.org:8080/target/target-script-min.js#clemet"></script>
    -->

    <!-- jQuery et al -->
    <script type="text/javascript" src="libs/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="libs/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <link type="text/css" rel="stylesheet" href="libs/jquery.mobile-1.1.0/jquery.mobile-1.1.0.css" />
    <script type="text/javascript" src="libs/jquery.sort.js"></script>
    <script type="text/javascript" src="libs/jquery.purl.js"></script>
    <script type="text/javascript" src="libs/jqm.autoComplete-1.5.1.js"></script>

    <!-- PhoneNavigator plugin so Android can open the native Navigator in case we can't get directions they need -->
    <script type="text/javascript" src="phonenavigator.js"></script>

    <!-- Leaflet map API and Wicket plugin for parsing WKT -->
    <link rel="stylesheet" type="text/css" href="libs/leaflet-0.7.1/leaflet.css" />
    <script type="text/javascript" src="libs/leaflet-0.7.1/leaflet.js"></script>
    <script type="text/javascript" src="libs/wicket/wicket.js"></script>
    <script type="text/javascript" src="libs/wicket/wicket-leaflet.js"></script>

    <!-- a caching system for Leaflet L.TileLayer -->
    <script type="text/javascript" src="libs/cache.js"></script>

    <!-- our own awesomesauce -->
    <script type="text/javascript" src="index.js"></script>
    <link rel="stylesheet" type="text/css" href="index.css" />
    <script type="text/javascript">
    document.addEventListener("deviceready", init, false);
    </script>
</body>
</html>
